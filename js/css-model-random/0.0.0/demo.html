<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>CSS Model Random</title>
    <link rel="stylesheet" href="./demo.css" />
    <!-- <script type="module" src="./global16.mjs"></script> -->
    <script type="module">
      import CSSModelRandom from "./index.mjs";
      import textToDOMNodes from "../../text-to-DOM-nodes/0.0.0/index.mjs";
      const count = 64;
      const varCount = count * 4;
      const width = "25%";
      const height = "25%";
      const seconds = 5;

      for (let i = 0; i < count; i++) {
        const a = 4 * i;
        const b = a + 1;
        const c = b + 1;
        const d = c + 1;
        // const color = `#${Math.floor(Math.random() * 2 ** 32)
        //   .toString(16)
        //   .padStart(8, "0")}`;
        const color = `#${Math.floor(Math.random() * 2 ** 16)
          .toString(16)
          .padStart(4, "0")}`;
        // const color = `rgba(${Math.floor(Math.random() * 256)}, ${Math.floor(
        //   Math.random() * 256
        // )}, ${Math.floor(Math.random() * 256)}, ${Math.random()})`;

        document.body.append(
          ...textToDOMNodes(`
                <div
        class="rectangle"
        data-id="${i}"
        style="
          background-color: ${color};
          --transition-function: ease-in-out;
          --speed: ${seconds}s;
          width: calc(${width} * var(--rand-${a}, 1));
          height: calc(${height} * var(--rand-${b}, 1));
          left: calc((100vw - (${width} * var(--rand-${a},1))) * var(--rand-${c}, 0.5));
          top: calc((100vh - (${width} * var(--rand-${b},1))) * var(--rand-${d}, 0.5));
        "
      ></div>`)
        );
      }

      setTimeout(() => {
        const model = new CSSModelRandom(globalThis.document, undefined, {
          count: varCount,
        });
        const interval = setInterval(() => {
          model.reset();
        }, seconds * 1000);
        globalThis.document.onclick = () => {
          clearInterval(interval);
          model.reset();
        };
      });
    </script>
  </head>
  <body></body>
</html>
